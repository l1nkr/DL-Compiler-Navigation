## 计算图中的表达式

### 什么是表达式

表达式就是一个计算过程,类似于如下：

```
output_mid = input1 + input2
output = output_mid * input3
```

但是在PNNX的Expession Layer中给出的是一种抽象表达式,会对计算过程进行折叠,消除中间变量. 并且将具体的输入张量替换为抽象输入@0,@1等.对于上面的计算过程,PNNX生成的抽象表达式是这样的.

```
add(@0,mul(@1,@2))
```

其中add和mul表示我们上一节中说到的RuntimeOperator, @0和@1表示我们上一节课中说道的RuntimeOperand. 这个抽象表达式看起来比较简单,但是实际上情况会非常复杂,我们给出一个复杂的例子：`add(add(mul(@0,@1),mul(@2,add(add(add(@0,@2),@3),@4))),@5)`

### 词法解析

词法解析的目的就是将add(@0,mul(@1,@2))拆分为多个token,token依次为add ( @0 , mul等.

### 语法解析

当得到token数组之后,我们对语法进行分析,并得到最终产物抽象语法树.语法解析的过程是递归向下的,定义在Generate_函数中.